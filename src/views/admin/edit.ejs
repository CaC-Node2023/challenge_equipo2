<%- include('../partials/header') %>
    <main id="edit" class="container">
        <h2 class="edit__title">EDITAR ITEM</h2>
        <form class="edit__form" action="/admin/edit/<%= product.product_id%>?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="form__flex form__product-family">
                <div class="form__box--flex">
                    <label class="form__label" for="category">Categoría:</label>
                    <select class="form__select" name="category" id="category" required>
                        <option value="" disabled selected hidden>Seleccionar</option>
                        <% categories.forEach( category => { %>
                            <option value="<%= category.category_id %>" <% if (category.category_id === product.category_id){  %> selected <% } %>><%= category.category_name %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="form__box--flex">
                    <label class="form__label" for="licence">Licencia:</label>
                    <select class="form__select" name="licence" id="licence" required>
                        <option value="" disabled hidden>Seleccionar</option>
                        <% licences.forEach(licence => { %>
                            <option value="<%= licence.licence_id %>" <% if (licence.licence_id === product.licence_id) { %> selected <% } %>><%= licence.licence_name %></option>
                        <% }); %>
                    </select>
                    
                </div>
            </div>
            <div class="form__box--flex">
                <label class="form__label" for="name">Nombre del producto:</label>
                <input class="form__input create__form__input--large" type="text" name="name" id="name" value="<%- product.product_name %>" required>
            </div>
            <div>
                <textarea id="edit__textarea" name="description" id="description" cols="30" rows="10" required><%- product.product_description %></textarea>
            </div>
            <div class="form__flex">
                <div class="form__box--flex">
                    <label class="form__label" for="sku">SKU:</label>
                    <input class="form__input create__form__input--mid" type="text" name="sku" id="sku" value="<%- product.product_sku %>" required>
                </div>
                <div class="form__box--flex">
                    <label class="form__label" for="price">Precio:</label>
                    <div class="form__input--wrapper"><input class="form__input create__form__input--mid" type="number" name="price" id="price" step=".01" value="<%- product.product_price %>" required></div>
                </div>
                <div class="form__box--flex">
                    <label class="form__label" for="stock">Stock:</label>
                    <div class="form__input--wrapper"><input class="form__input create__form__input--small" type="number" name="stock" id="stock" value="<%- product.stock %>" required></div>
                </div>
            </div>
            <div class="form__flex">
                <div class="form__box--flex">
                    <label class="form__label" for="discount">Descuento:</label>
                    <div class="form__input--wrapper"><input class="form__input create__form__input--small" type="number" name="discount" id="discount" value="<%- product.discount %>" required></div>
                </div>
                <div class="form__box--flex">
                    <label class="form__label" for="installments">Cuotas:</label>
                    <select class="form__select" name="installments" id="installments" required>
                        <option value="" disabled hidden>Seleccionar</option>
                        <% const installmentsOptions = [1, 3, 6, 12]; %>
                        <% installmentsOptions.forEach(option => { %>
                            <option value="<%= option %>" <% if (option === product.dues) { %> selected <% } %>>
                                <% if (option === 1) { %>Contado<% } else { %><%= option %> cuotas<% if (option > 1) { %> sin interés<% } %><% } %>
                            </option>
                        <% }); %>
                    </select>
                    
                    
                </div>
            </div>
            <div class="form__box--flex">
                <label class="form__label" for="pictures">Imágenes:</label>
                <input type="file" name="pictures" id="pictures" accept="image/*" multiple>
            </div>
           <ul class="edit__pictures"><!--Inicio Frente y dorso -->
                <li class="edit__picture">
                    <picture class="form__input">
                        <a href="<%= product.img_front%>">
                            <img class="form edit__img" src="<%= product.img_front%>" alt="Imagen de Funko coleccionable de Kakashi Hatake de la saga Naruto Shipudden invocando chidori.">
                        </a>
                    </picture>
                        <p class="edit__picture__title">Frente</p>
                </li>
                <li class="edit__picture">
                    <picture class="form__input">
                        <a href="<%= product.img_back%>">
                            <img class="form edit__img" src="<%= product.img_back%>" alt="Imagen de la caja de Funko coleccionable de Kakashi Hatake de la saga Naruto Shipudden invocando chidori.">
                        </a>
                    </picture>
                        <p class="edit__picture__title">Dorso</p>
                </li>
            </ul> <!--Fin Frente y dorso -->
            <div class="form__flex">
                <input class="form__btn btn btn--primary btn--large" type="submit" value="Modificar Producto">
            </div>
        </form>
    </main>
<%- include('../partials/footer') %>